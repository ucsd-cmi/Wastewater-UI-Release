import { NextApiRequest, NextApiResponse } from "next";

async function handler(req: NextApiRequest, res: NextApiResponse) {
  var color = req.query.color!.toString();
  color = "#" + color.replace(".ts", "");

  var svgString = '<svg width="56" height="38" viewBox="0 0 56 38" fill="none" xmlns="http://www.w3.org/2000/svg">';
  svgString += '<rect x="6.5" y="0.5" width="43" height="21" rx="3.5" fill="white"/>';
  svgString += '<rect x="6.5" y="0.5" width="43" height="21" rx="3.5" stroke="' + color + '"/>';
  svgString += '<path d="M29.1445 23.2969L31.6339 24.2529L31.1559 25.4975L30.5332 25.2582L30.0359 26.5549C30.5548 26.8628 30.9979 27.2834 31.3325 27.7855L32.6012 27.2209L32.3299 26.6115L33.5479 26.0695L34.6325 28.5055L33.4145 29.0475L33.1432 28.4389L31.8752 29.0035C32.0248 29.588 32.0407 30.1987 31.9219 30.7902L33.2179 31.2875L33.4565 30.6655L34.7019 31.1435L33.7459 33.6329L32.5012 33.1549L32.7399 32.5329L31.4439 32.0349C31.1359 32.5538 30.7154 32.997 30.2132 33.3315L30.7779 34.6002L31.3872 34.3289L31.9292 35.5469L29.4932 36.6315L28.9512 35.4135L29.5599 35.1422L28.9952 33.8742C28.4104 34.0237 27.7995 34.0394 27.2079 33.9202L26.7105 35.2169L27.3332 35.4555L26.8552 36.7009L24.3659 35.7449L24.8439 34.5002L25.4652 34.7389L25.9639 33.4429C25.4448 33.1348 25.0015 32.7143 24.6665 32.2122L23.3979 32.7769L23.6692 33.3862L22.4512 33.9282L21.3665 31.4922L22.5845 30.9502L22.8552 31.5595L24.1239 30.9942C23.9755 30.4095 23.9598 29.7991 24.0779 29.2075L22.7812 28.7102L22.5432 29.3322L21.2979 28.8542L22.2539 26.3655L23.4985 26.8435L23.2592 27.4655L24.5559 27.9635C24.8637 27.4442 25.2843 27.0006 25.7865 26.6655L25.2219 25.3969L24.6125 25.6682L24.0705 24.4502L26.5065 23.3662L27.0485 24.5842L26.4399 24.8555L27.0045 26.1235C27.589 25.974 28.1997 25.958 28.7912 26.0769L29.2879 24.7802L28.6665 24.5422L29.1445 23.2969ZM26.7559 30.8202C26.6674 30.9734 26.6435 31.1555 26.6893 31.3263C26.7352 31.4972 26.847 31.6428 27.0002 31.7312C27.1534 31.8196 27.3354 31.8435 27.5063 31.7977C27.6771 31.7519 27.8228 31.6401 27.9112 31.4869C27.955 31.411 27.9834 31.3273 27.9948 31.2404C28.0062 31.1536 28.0004 31.0654 27.9777 30.9808C27.955 30.8962 27.9159 30.8169 27.8625 30.7474C27.8092 30.6779 27.7427 30.6196 27.6669 30.5759C27.591 30.5321 27.5073 30.5037 27.4204 30.4923C27.3336 30.4809 27.2453 30.4867 27.1607 30.5094C27.0762 30.5321 26.9969 30.5712 26.9274 30.6245C26.8579 30.6779 26.7996 30.7443 26.7559 30.8202ZM29.3332 29.3322C29.1564 29.3322 28.9868 29.4024 28.8618 29.5275C28.7368 29.6525 28.6665 29.8221 28.6665 29.9989C28.6665 30.1757 28.7368 30.3453 28.8618 30.4703C28.9868 30.5953 29.1564 30.6655 29.3332 30.6655C29.51 30.6655 29.6796 30.5953 29.8046 30.4703C29.9296 30.3453 29.9999 30.1757 29.9999 29.9989C29.9999 29.8221 29.9296 29.6525 29.8046 29.5275C29.6796 29.4024 29.51 29.3322 29.3332 29.3322ZM26.9999 28.2669C26.924 28.3107 26.8576 28.369 26.8043 28.4385C26.751 28.508 26.712 28.5873 26.6893 28.6719C26.6667 28.7565 26.661 28.8447 26.6724 28.9315C26.6839 29.0184 26.7124 29.1021 26.7562 29.1779C26.8 29.2537 26.8583 29.3201 26.9278 29.3734C26.9973 29.4267 27.0766 29.4658 27.1612 29.4884C27.2458 29.511 27.334 29.5168 27.4209 29.5053C27.5077 29.4938 27.5914 29.4654 27.6672 29.4215C27.8203 29.333 27.932 29.1874 27.9777 29.0165C28.0234 28.8457 27.9993 28.6637 27.9109 28.5105C27.8224 28.3574 27.6767 28.2457 27.5058 28.2C27.335 28.1543 27.153 28.1784 26.9999 28.2669Z" fill="' + color + '"/>';
  svgString += '</svg>';

  res.setHeader("Content-Type", "image/svg+xml");

  res.send(svgString);
}

export default handler;
